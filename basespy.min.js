/*! basespy | https://github.com/hiddentao/basespy | BSD license */
(function(t,e){"use strict";if("function"==typeof define)define(e);else if("undefined"!=typeof module&&module.exports)module.exports=e();else{var n=window||this,o=n[t],i=e();i.noConflict=function(){return n[t]=o,i},n[t]=i}})("BaseSpy",function(){"use strict";var t=function(t){return Array.prototype.slice.call(t)},e=function(t,e){for(var n in t)t.hasOwnProperty(n)&&e.call(null,t[n],n)};Function.prototype.inheritsFrom=function(t){return this.prototype=Object.create(t.prototype),this},Function.prototype.observes=function(){return this.__observes=t(arguments),this},Function.prototype.computed=function(){return this.__computed=t(arguments),this};var n=function(t,n,o){e(o,function(e){t[e]||(t[e]={}),t[e][n]=n})},o=null,i=function(t,n){var i=this,r=!1;o||(o={},r=!0),o[n]=!0;var p=t[n];e(p||{},function(t){if(!o[t])switch(i.__prop[t].type){case"function":i[t].call(i);break;case"computed":i.__prop[t].dirty=!0,i[t]}}),r&&(o=null)},r=function(o){return function(){var p=function(){o.call(this)};return p.inheritsFrom(o),p.prototype.__prop={},p.__dependencies={},p.__classDefinition=o.__classDefinition||{},e(t(arguments),function(t){e(t,function(t,e){p.__classDefinition[e]=t})}),e(p.__classDefinition,function(t,e){switch(typeof t){case"function":t.__observes?(n(p.__dependencies,e,t.__observes),p.prototype.__prop[e]={type:"function"},p.prototype[e]=t):t.__computed?(n(p.__dependencies,e,t.__computed),p.prototype.__prop[e]={type:"computed"},Object.defineProperty(p.prototype,e,{get:function(){if(!this.__prop[e].hasOwnProperty("value")||this.__prop[e].dirty){delete this.__prop[e].dirty;var n=t.call(this);n!==this.__prop[e].value&&(this.__prop[e].value=n,i.call(this,p.__dependencies,e))}return this.__prop[e].value},set:function(){throw Error("Cannot set computed property: "+e)}})):(delete p.prototype.__prop[e],p.prototype[e]=t);break;default:p.prototype.__prop[e]={type:"value",value:t},Object.defineProperty(p.prototype,e,{get:function(){return this.__prop[e].value},set:function(t){t!==this.__prop[e].value&&(this.__prop[e].value=t,i.call(this,p.__dependencies,e))}})}}),p.extend=r(p),p}},p=function(){this._init()};return p.prototype._init=function(){},p.extend=r(p),p});