/*! basespy | https://github.com/hiddentao/basespy | BSD license */
(function(t,e){"use strict";if("function"==typeof define)define(e);else if("undefined"!=typeof module&&module.exports)module.exports=e();else{var o=window||this,n=o[t],i=e();i.noConflict=function(){return o[t]=n,i},o[t]=i}})("BaseSpy",function(){"use strict";var t=function(t){return Array.prototype.slice.call(t)},e=function(t,e){for(var o in t)t.hasOwnProperty(o)&&e.call(null,t[o],o)};Function.prototype.inheritsFrom=function(t){return this.prototype=Object.create(t.prototype),this},Function.prototype.observes=function(){return this.__observes=t(arguments),this},Function.prototype.computed=function(){return this.__computed=t(arguments),this},Function.prototype.volatile=function(){return this.__volatile=!0,this};var o=function(t,o,n){e(n,function(e){t[e]||(t[e]={}),t[e][o]=o})},n=null,i=function(t,o){var i=this,r=!1;n||(n={},r=!0),n[o]=!0;var p=t[o];e(p||{},function(t){if(!n[t])switch(delete i.__prop[t].value,i.__prop[t].type){case"function":i[t].call(i);break;case"computed":i[t]}}),r&&(n=null)},r=function(n){return function(){var p=function(){n.call(this)};return p.inheritsFrom(n),p.prototype.__prop={},p.__dependencies={},p.__classDefinition=n.__classDefinition||{},e(t(arguments),function(t){e(t,function(t,e){p.__classDefinition[e]=t})}),e(p.__classDefinition,function(t,e){switch(typeof t){case"function":t.__observes?(o(p.__dependencies,e,t.__observes),p.prototype.__prop[e]={type:"function"},p.prototype[e]=t):t.__computed?(o(p.__dependencies,e,t.__computed),p.prototype.__prop[e]={type:"computed"},Object.defineProperty(p.prototype,e,{get:function(){if(!this.__prop[e].hasOwnProperty("value")||t.__volatile){var o=t.call(this);void 0!==o&&o!==this.__prop[e].value&&(this.__prop[e].value=o,i.call(this,p.__dependencies,e))}return this.__prop[e].value},set:function(){throw Error("Cannot set computed property: "+e)}})):(delete p.prototype.__prop[e],p.prototype[e]=t);break;default:p.prototype.__prop[e]={type:"value",value:t},Object.defineProperty(p.prototype,e,{get:function(){return this.__prop[e].value},set:function(t){t!==this.__prop[e].value&&(this.__prop[e].value=t,i.call(this,p.__dependencies,e))}})}}),p.extend=r(p),p}},p=function(){this._init()};return p.prototype._init=function(){},p.extend=r(p),p});